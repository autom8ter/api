syntax="proto3";

package api;

import "google/api/annotations.proto";
import "common/common.proto";

service UtilityService {
    rpc Echo(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo"
      body: "*"
    };
    }
    rpc EchoSpanish(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/spanish"
      body: "*"
    };
    }
    rpc EchoChinese(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/chinese"
      body: "*"
    };
    }
    rpc EchoEnglish(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/english"
      body: "*"
    };
    }
    rpc EchoHindi(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/hindi"
      body: "*"
    };
    }
    rpc EchoArabic(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/arabic"
      body: "*"
    };
    }
}

service ContactService {
    rpc SendSMS(SMS) returns (common.Bytes) {
        option (google.api.http) = {
      post: "/contact/sms/send"
      body: "*"
    };
    }
    rpc SendSMSBlast(SMSBlast) returns (stream common.Bytes) {
        option (google.api.http) = {
      post: "/contact/sms/blast"
      body: "*"
    };
    }
    rpc GetSMS(common.Identifier) returns (common.Bytes) {
        option (google.api.http) = {
      post: "/contact/sms/get"
      body: "*"
    };
    }
    rpc SendEmail(EmailRequest) returns (common.String) {
        option (google.api.http) = {
      post: "/contact/email/send"
      body: "*"
    };
    }
    rpc SendEmailBlast(EmailBlastRequest) returns (stream common.String) {
        option (google.api.http) = {
      post: "/contact/email/blast"
      body: "*"
    };
    }
    rpc SendCall(Call) returns (common.Bytes) {
        option (google.api.http) = {
      post: "/contact/call/send"
      body: "*"
    };
    }
    rpc SendCallBlast(CallBlast) returns (stream common.Bytes) {
        option (google.api.http) = {
      post: "/contact/call/blast"
      body: "*"
    };
    }

    rpc SendFax(FaxRequest) returns (common.Bytes) {
         option (google.api.http) = {
      post: "/contact/fax/send"
      body: "*"
    };
    }


}

service PaymentService {
    rpc Subscribe(SubscribeRequest) returns (common.Bytes) {
        option (google.api.http) = {
      post: "/payment/subscribe"
      body: "*"
    };
    }
    rpc Unsubscribe(UnSubscribeRequest) returns (common.Bytes) {
        option (google.api.http) = {
      post: "/payment/unsubscribe"
      body: "*"
    };
    }
    rpc PurchasePhoneNumber(PhoneNumber) returns (PhoneNumberResource) {
        option (google.api.http) = {
      post: "/payment/number"
      body: "*"
    };
    }
    rpc SearchPhoneNumber(SearchPhoneNumberRequest) returns (stream PhoneNumber) {
        option (google.api.http) = {
      post: "/payment/numbers/search"
      body: "*"
    };
    }
}

service ResourceService {
    rpc GetResource(ResourceRequest) returns (common.Bytes) {
        option (google.api.http) = {
      post: "/resource"
      body: "*"
    };
    }
}

service UserService {
    rpc QueryUsers(TokenQuery) returns (stream User) {
        option (google.api.http) = {
      post: "/resource/user/query"
      body: "*"
    };
    }
    rpc CreateUser(common.Bytes) returns (User) {
        option (google.api.http) = {
      post: "/resource/user/create"
      body: "*"
    };
    }
    rpc GetUser(common.Identifier) returns (User) {
        option (google.api.http) = {
      post: "/resource/user/get"
      body: "*"
    };
    }
    rpc DeleteUser(common.Identifier) returns (User) {
        option (google.api.http) = {
      post: "/resource/user/get"
      body: "*"
    };
    }
    rpc UpdateUser(IDBody) returns (User) {
        option (google.api.http) = {
      post: "/resource/user/update"
      body: "*"
    };
    }
    rpc UserRoles(common.Identifier) returns (stream Role) {
        option (google.api.http) = {
      post: "/resource/user/roles"
      body: "*"
    };
    }
}

message FaxRequest {
    common.String to =1;
    common.String from=2;
    common.String media_url =3;
    common.String quality=4;
    common.String callback=5;
    common.Bool store_media=6;
}

message ResourceRequest {
    common.Token token= 1;
    common.HTTPMethod method=2;
    common.String domain=3;
    URL url =4;
    common.StringMap form =5;
    common.Bytes body =6;
}

message SubscribeRequest {
    common.String email=1;
    Plan plan =2;
    Card card =3;
}

message UnSubscribeRequest {
    common.String email=1;
    Plan plan =2;
}

message Card {
    common.String number=1;
    common.String exp_month=2;
    common.String exp_year =3;
    common.String cvc=4;
}


message SMS {
    common.String service =1;
    common.String to =2;
    common.String message=3;
    common.String mediaURL =4;
    common.String callback=5;
    common.String app=6;
}

message SMSBlast {
    common.String service =1;
    common.StringArray to =2;
    common.String message=3;
    common.String mediaURL =4;
    common.String callback=5;
    common.String app=6;
}

message EmailRequest {
    common.String from_name =1;
    common.String from_email =2;
    Email email =3;
}

message EmailBlastRequest {
    common.String from_name =1;
    common.String from_email =2;
    EmailBlast blast =3;
}

message EmailBlast {
    common.StringMap name_address =1;
    common.String subject =2;
    common.String plain=3;
    common.String html=4;
}

message Email {
    common.String name =1;
    common.String address =2;
    common.String subject =3;
    common.String plain=4;
    common.String html=5;
}

message Call {
    common.String from=1;
    common.String to =2;
    common.String app=3;
}

message CallBlast {
    common.String from=1;
    common.StringArray to =2;
    common.String app=3;
}


message User {
    common.String user_id=1;
    common.String name=2;
    common.String given_name=3;
    common.String family_name=4;
    common.String gender =5;
    common.String birthdate=6;
    common.String email=7;
    common.String phone_number=8;
    common.String picture=9;
    common.StringMap user_metadata=10;
    common.StringMap app_metadata=11;
    common.String last_ip =12;
    common.Bool blocked =13;
    common.String nickname =14;
    common.StringArray multifactor=15;
    common.String created_at=17;
    common.String updated_at=18;
    common.Bool phone_verified=19;
    common.Bool email_verified=20;
    common.String password=21;
    repeated Identity identities =22;
}

message Identity{
    common.String connection =1;
    common.String user_id=2;
    common.String provider=3;
    common.Bool isSocial=4;
}

message Auth {
    common.String domain =1;
    common.String client_id=2;
    common.String client_secret=3;
    common.String redirect=4;
    repeated Scope scopes=5;
}


message JSONWebKeys {
    common.String kty =1;
    common.String kid =2;
    common.String use =3;
    common.String n =4;
    common.String e =5;
    common.StringArray x5c =6;
}

message Jwks {
    repeated JSONWebKeys keys=1;
}

enum Scope {
    OPENID =0;
    PROFILE =1;
    EMAIL =2;
    READ_USERS=3;
    READ_USER_IDP_TOKENS=4;
    CREATE_USERS=5;
    READ_STATS=6;
    READ_EMAIL_TEMPLATES =7;
    UPDATE_EMAIL_TEMPLATES=8;
    CREATE_EMAIL_TEMPLATES=9;
    READ_RULES =10;
    UPDATE_RULES=11;
    CREATE_RULES=12;
    DELETE_RULES=13;
    READ_ROLES =14;
    UPDATE_ROLES=15;
    CREATE_ROLES=16;
    DELETE_ROLES=17;
    READ_LOGS=18;
}

enum URL {
    USER_INFOURL =0;
    TOKENURL =1;
    AUTHORIZEURL =2;
    USERSURL=3;
    CLIENTSURL=4;
    GRANTSURL=5;
    RULESURL=6;
    ROLESURL =7;
    LOGSURL=8;
    STATSURL=9;
    CONNECTIONSURL =10;
    TENANTSURL=11;
    EMAIL_TEMPLATEURL=12;
    EMAILURL =13;
    SEARCH_USERSURL=14;
    DEVICEURL =18;
    JWKSURL =19;
    CLIENT_GRANTSURL =20;
}

enum Plan {
    FREE =0;
    BASIC=1;
    PREMIUM=2;
}

message RenderRequest {
    common.String name=1;
    common.String text=2;
    common.Bytes data=3;
}

message SearchPhoneNumberRequest {
    common.String state =1;
    NumberCapabilities capabilities =2;
    common.Int64 total_results=3;
}

message PhoneNumber {
    common.String friendly_name=1;
    common.String phone_number=2;
    common.String region=3;
    NumberCapabilities capabilities =4;
}

message NumberCapabilities {
    common.Bool voice =1;
    common.Bool sms=2;
    common.Bool mms=3;
}

message PhoneNumberResource {
   PhoneNumber number=1;
   common.String id =2;
   common.String uri=3;
}

message TokenQuery {
    common.Token token =1;
    common.String  query =2;
}

message IDBody {
    common.Identifier id =1;
    common.Bytes  body =2;
}

message IDStrings {
    common.Identifier id =1;
    common.StringArray  strings =2;
}

message Role {
    common.String id=1;
    common.String name=2;
    common.String description=3;
}
