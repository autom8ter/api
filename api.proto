syntax="proto3";

package api;

import "google/api/annotations.proto";
import "common/common.proto";

service UtilityService {
    rpc Echo(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo"
      body: "*"
    };
    }
    rpc EchoSpanish(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/spanish"
      body: "*"
    };
    }
    rpc EchoChinese(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/chinese"
      body: "*"
    };
    }
    rpc EchoEnglish(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/english"
      body: "*"
    };
    }
    rpc EchoHindi(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/hindi"
      body: "*"
    };
    }
    rpc EchoArabic(common.String) returns (common.String) {
        option (google.api.http) = {
      post: "/utility/echo/arabic"
      body: "*"
    };
    }
}

service ContactService {
    rpc SendSMS(SMS) returns (SMSResponse) {
        option (google.api.http) = {
      post: "/contact/sms/send"
      body: "*"
    };
    }
    rpc SendSMSBlast(SMSBlast) returns (stream SMSResponse) {
        option (google.api.http) = {
      post: "/contact/sms/blast"
      body: "*"
    };
    }
    rpc GetSMS(common.Identifier) returns (SMSResponse) {
        option (google.api.http) = {
      post: "/contact/sms/get"
      body: "*"
    };
    }
    rpc SendEmail(EmailRequest) returns (common.String) {
        option (google.api.http) = {
      post: "/contact/email/send"
      body: "*"
    };
    }
    rpc SendEmailBlast(EmailBlastRequest) returns (stream common.String) {
        option (google.api.http) = {
      post: "/contact/email/blast"
      body: "*"
    };
    }
    rpc SendCall(Call) returns (CallResponse) {
        option (google.api.http) = {
      post: "/contact/call/send"
      body: "*"
    };
    }
    rpc SendCallBlast(CallBlast) returns (stream CallResponse) {
        option (google.api.http) = {
      post: "/contact/call/blast"
      body: "*"
    };
    }

    rpc SendFax(Fax) returns (FaxResponse) {
         option (google.api.http) = {
      post: "/contact/fax/send"
      body: "*"
    };
    }
    rpc SendFaxBlast(FaxBlast) returns (stream FaxResponse) {
        option (google.api.http) = {
      post: "/contact/fax/blast"
      body: "*"
    };
    }
}

service PaymentService {
    rpc Subscribe(SubscribeRequest) returns (SubscriptionResponse) {
        option (google.api.http) = {
      post: "/payment/subscribe"
      body: "*"
    };
    }
    rpc Unsubscribe(UnSubscribeRequest) returns (SubscriptionResponse) {
        option (google.api.http) = {
      post: "/payment/unsubscribe"
      body: "*"
    };
    }
    rpc PurchasePhoneNumber(PhoneNumber) returns (PhoneNumberResource) {
        option (google.api.http) = {
      post: "/payment/number"
      body: "*"
    };
    }
    rpc SearchPhoneNumber(SearchPhoneNumberRequest) returns (stream PhoneNumber) {
        option (google.api.http) = {
      post: "/payment/numbers/search"
      body: "*"
    };
    }
}

service AuthenticationService {
    rpc GetUser(common.AuthToken) returns (User) {
        option (google.api.http) = {
      post: "/authentication/user/get"
      body: "*"
    };
    }

}

service ManagementService {
    rpc QueryUsers(Query) returns (stream User) {
        option (google.api.http) = {
      post: "/management/user/query"
      body: "*"
    };
    }

    rpc GetUser(common.Identifier) returns (User) {
        option (google.api.http) = {
      post: "/management/user/get"
      body: "*"
    };
    }

    rpc UpdateUser(User) returns (User) {
        option (google.api.http) = {
      post: "/management/user/update"
      body: "*"
    };
    }
    rpc UserRoles(common.Identifier) returns (stream Role) {
        option (google.api.http) = {
      post: "/management/user/roles"
      body: "*"
    };
    }
    rpc AddUserRoles(AddUserRolesRequest) returns (common.String) {
        option (google.api.http) = {
      post: "/management/user/roles"
      body: "*"
    };
    }
    rpc QueryUserEvents(Query) returns (stream Event) {
        option (google.api.http) = {
      post: "/management/user/query"
      body: "*"
    };
    }
}

message AddUserRolesRequest {
    common.Identifier email =1;
    repeated Role roles=2;
}

message Fax {
    common.String to =1;
    common.String from=2;
    common.String media_url =3;
    common.String quality=4;
    common.String callback=5;
    bool store_media=6;
}

message FaxBlast {
    common.StringArray to =1;
    common.String from=2;
    common.String media_url =3;
    common.String quality=4;
    common.String callback=5;
    bool store_media=6;
}

message SubscribeRequest {
    common.String email=1;
    Plan plan =2;
    Card card =3;
}

message UnSubscribeRequest {
    common.String email=1;
    Plan plan =2;
}

message Card {
    common.String number=1;
    common.String exp_month=2;
    common.String exp_year =3;
    common.String cvc=4;
}


message SMS {
    common.String service =1;
    common.String to =2;
    common.String message=3;
    common.String mediaURL =4;
    common.String callback=5;
    common.String app=6;
}

message SMSBlast {
    common.String service =1;
    common.StringArray to =2;
    common.String message=3;
    common.String mediaURL =4;
    common.String callback=5;
    common.String app=6;
}

message EmailRequest {
    common.String from_name =1;
    common.String from_email =2;
    Email email =3;
}

message EmailBlastRequest {
    common.String from_name =1;
    common.String from_email =2;
    EmailBlast blast =3;
}

message EmailBlast {
    common.StringMap name_address =1;
    common.String subject =2;
    common.String plain=3;
    common.String html=4;
}

message Email {
    common.String name =1;
    common.String address =2;
    common.String subject =3;
    common.String plain=4;
    common.String html=5;
}

message Call {
    common.String from=1;
    common.String to =2;
    common.String app=3;
}

message CallBlast {
    common.String from=1;
    common.StringArray to =2;
    common.String app=3;
}


message User {
    common.Identifier user_id=1;
    common.String name=2;
    common.String given_name=3;
    common.String family_name=4;
    common.String gender =5;
    common.String birthdate=6;
    common.Identifier email=7;
    common.Identifier phone_number=8;
    common.String picture=9;
    common.StringMap user_metadata=10;
    common.StringMap app_metadata=11;
    common.String last_ip =12;
    bool blocked =13;
    common.String nickname =14;
    common.StringArray multifactor=15;
    common.String created_at=17;
    common.String updated_at=18;
    bool phone_verified=19;
    bool email_verified=20;
    common.String password=21;
    repeated Identity identities =22;
}

message Identity{
    common.String connection =1;
    common.Identifier user_id=2;
    common.String provider=3;
    bool isSocial=4;
}

enum Plan {
    FREE =0;
    BASIC=1;
    PREMIUM=2;
}

message RenderRequest {
    common.String name=1;
    common.String text=2;
    common.String data=3;
}

message SearchPhoneNumberRequest {
    common.String state =1;
    NumberCapabilities capabilities =2;
    common.Int64 total_results=3;
}

message PhoneNumber {
    common.String friendly_name=1;
    common.String phone_number=2;
    common.String region=3;
    NumberCapabilities capabilities =4;
}

message NumberCapabilities {
    bool voice =1;
    bool sms=2;
    bool mms=3;
}

message PhoneNumberResource {
   PhoneNumber number=1;
   common.Identifier id =2;
   common.String uri=3;
}

message Role {
    common.Identifier id=1;
    common.String name=2;
    common.String description=3;
}

message CallResponse {
    common.Identifier   id=1;
    common.String  to =5;
    common.String  from =6;
    common.String  status =9;
    common.String  answered_by =10;
    common.String  forwarded_from =11;
    common.String  caller_name =12;
    common.StringMap annotations=13;
}

message SMSResponse {
    common.Identifier  id=1;
    common.String  to =5;
    common.String  from =6;
    common.String  media_url = 7;
    common.String  body =8;
    common.String  status =9;
    common.StringMap annotations=10;
}

message SubscriptionResponse {
    common.Identifier  id=1;
    common.Int64 amount=2;
    common.Int64 days_until_due=3;
    common.StringMap annotations=10;
    Plan plan=4;
    User user=5;
    common.String status=6;

}

message FaxResponse {
    common.Identifier id =1;
    common.String media_url=3;
    common.String to=4;
    common.String from=5;
    common.String  status =6;
    common.StringMap annotations=10;
}

message OAuth2 {
    common.String client_id=1;
    common.String client_secret=2;
    common.String token_url =3;
    common.String auth_url =4;
    common.StringArray scopes =5;
    common.String redirect =6;
    common.String code =7;
}

message ClientCredentials {
    common.String client_id=1;
    common.String client_secret=2;
    common.String token_url =3;
    common.StringArray scopes =4;
    common.StringMap endpoint_params=5;
}

message JWT {
    common.String email=1;
    bytes private_key=2;
    common.String prive_key_id =3;
    common.String subject =4;
    common.StringArray scopes=5;
    common.String token_url =6;
    common.String expires =7;
    common.String audience =8;
}

message Query {
    common.String query=4;
    common.String fields=5;
}

message Event {
    common.String date=1;
    common.String type=2;
    common.String client_id=3;
    common.String client_name=4;
    common.String ip=5;
    common.String location_info=6;
    common.String details=7;
    common.String user_id=8;
}

message JSONWebKeys {
    common.String kty =1;
    common.Identifier kid =2;
    common.String use =3;
    common.String n =4;
    common.String e =5;
    common.StringArray x5c =6;
}

message Jwks {
    repeated JSONWebKeys keys=1;
}
